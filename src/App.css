/* =========================================================================
   PaperMarty — Kaspa Paper Wallet (Folded Card)
   >>> Styling only. Card generation/printing logic is untouched.
   ========================================================================= */

/* -------------------------------------------------------------------------
   TOKENS (EDIT THESE)
   ------------------------------------------------------------------------- */
:root {
  /* Colors */
  --bg: #70c7ba; /* site background (teal) */
  --ink: #e7e7e7;
  --muted: #9aa1a6;
  --danger: #b00020;

  /* High-contrast ink over teal (for header & top texts) */
  --ink-strong: #0e2a27; /* main dark text on teal */
  --ink-muted-strong: #214e4a; /* secondary dark text on teal */

  /* Page layout */
  --app-maxw: 960px;
  --app-pad: 20px;
  --app-mt: 8px; /* ↓ avant: 24px */

  /* Header sizing (FULL-WIDTH header even inside .app) */
  --header-pad-x: 48px; /* left/right padding */
  --header-pad-y: 10px; /* ↓ avant: 26px */
  --header-mb: 12px; /* ↓ avant: 32px */
  --header-gap: 16px; /* gap between logo | center | socials */
  --center-maxw: 70vw;

  /* Left logo size */
  --logo-size: 120px; /* ↓ avant: 150px */

  /* ====== NEWSPAPER TITLE (Times-like serif) ====== */
  --title-font: "Times New Roman", Times, Georgia, Garamond, Baskerville, serif;
  --title-size: 48px; /* ↓ avant: 56px */
  --title-weight: 700; /* bold serif = classic newspaper masthead */
  --title-by-gap: 14px; /* space between title and byline */

  /* Byline (text + small logo) */
  --byline-size: 14px;
  --byline-icon-size: 25px; /* marty.webp size */
  --byline-nudge-y: -1px; /* fine vertical align */

  /* Social icons (icon-only, no card) */
  --social-gap: 14px;
  --social-icon: 24px;
  --social-hit: 10px;
  --social-color: #0e2a27;
  --social-hover: #08302b;

  /* Card sheet geometry (printing) — UNCHANGED */
  --CARD_W: 53.98mm;
  --CARD_H: 85.6mm;
  --SHEET_W: calc(var(--CARD_W) * 2);
  --SHEET_H: var(--CARD_H);
  --pad: 3mm;
  --QR_PUBLIC: 40mm;
  --QR_SEED: 42mm;
}

/* -------------------------------------------------------------------------
   Base
   ------------------------------------------------------------------------- */
* {
  box-sizing: border-box;
}
html,
body,
#root {
  height: 100%;
}
body {
  margin: 0;
  background: var(--bg);
  color: var(--ink-strong);
  font: 14px/1.35 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell,
    Noto Sans, Arial, sans-serif;
}

.app {
  max-width: var(--app-maxw);
  margin: var(--app-mt) auto;
  padding: var(--app-pad);
}

/* “Top panel” (passphrase + buttons) — flat look (no dark frame) */
.card {
  background: transparent;
  border: 0;
  border-radius: 0;
  padding: 0;
  box-shadow: none;
}

.row {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 16px;
}
label {
  display: block;
  font-size: 12px;
  color: var(--ink-muted-strong);
  margin-bottom: 6px;
}
.muted {
  color: var(--ink-muted-strong);
}
input[type="text"] {
  width: 100%;
  background: #0f1113;
  color: #e7e7e7;
  border: 1px solid #2a2f35;
  border-radius: 10px;
  padding: 10px 12px;
}
input::placeholder {
  color: #cfd6da;
}
button {
  cursor: pointer;
  border: 0;
  border-radius: 12px;
  padding: 12px 16px;
  background: #2a6df4;
  color: #fff;
  font-weight: 700;
}
button.ghost {
  background: #1b1d22;
  color: #e7e7e7;
  border: 1px solid #2a2f35;
}

/* -------------------------------------------------------------------------
   FULL-WIDTH HEADER (title + byline inline, centered as one block)
   ------------------------------------------------------------------------- */
.site-header {
  position: sticky;
  top: 0;
  z-index: 100;
  width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  padding: var(--header-pad-y) var(--header-pad-x);
  /* Notch-safe top padding */
  padding-top: max(var(--header-pad-y), env(safe-area-inset-top));
  margin-bottom: var(--header-mb);
  background: transparent;
}
html,
body {
  overflow-x: hidden;
}

.site-header__inner {
  width: 100%;
  margin: 0;
  background: transparent;
  border: 0;
  box-shadow: none;
  border-radius: 0;

  position: relative; /* allows absolute centered title */
  display: grid;
  grid-template-columns: auto 1fr auto; /* left | (spacer) | right */
  align-items: center;
  gap: var(--header-gap);
}

/* Left: Kaspa logo */
.site-header__left {
  display: flex;
  align-items: center;
}
.site-logo {
  width: var(--logo-size);
  height: var(--logo-size);
  object-fit: contain;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.25));
}

/* Center: title + byline inline, centered as one block */
.site-header__center {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  max-width: var(--center-maxw);
}
.title-line {
  display: inline-flex; /* shrink-wrap to content for perfect centering */
  align-items: baseline;
  gap: var(--title-by-gap);
  white-space: nowrap;
}

/* ====== Times-like newspaper title ====== */
.site-title {
  margin: 0;
  font-family: var(--title-font);
  font-size: var(--title-size);
  font-weight: var(--title-weight);
  line-height: 1.02;
  letter-spacing: 0.01em; /* serif reads better with minimal tracking */
  word-spacing: 0.04em;
  text-transform: none; /* Title Case for readability */
  color: var(--ink-strong);
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.08); /* subtle separation on teal */
}

/* Byline sits to the RIGHT of the title */
.site-byline {
  margin: 0;
  font-size: var(--byline-size);
  color: var(--ink-muted-strong);
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transform: translateY(var(--byline-nudge-y));
}
.by-icon {
  width: var(--byline-icon-size);
  height: var(--byline-icon-size);
  object-fit: contain;
  filter: drop-shadow(0 0 1px rgba(0, 0, 0, 0.1));
}

/* Right: socials (icon-only) */
.site-header__right {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: var(--social-gap);
}
.social-btn {
  --hit: var(--social-hit);
  display: inline-grid;
  place-items: center;
  padding: var(--hit);
  width: calc(var(--social-icon) + var(--hit) * 2);
  height: calc(var(--social-icon) + var(--hit) * 2);
  color: var(--social-color);
  text-decoration: none;
  background: transparent;
  border: 0;
  border-radius: 10px;
  transition: transform 0.12s ease, color 0.12s ease, filter 0.12s ease;
  outline: none;
}
.social-btn:hover {
  transform: translateY(-1px) scale(1.06);
  color: var(--social-hover);
  filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.15));
}
.social-btn:active {
  transform: translateY(0) scale(0.98);
}
.social-btn:focus-visible {
  box-shadow: 0 0 0 2px rgba(8, 48, 43, 0.35);
}
.social-btn svg {
  width: var(--social-icon);
  height: var(--social-icon);
  display: block;
}
.social-btn svg path {
  fill: currentColor;
}

/* Optional: stack on small screens */
@media (max-width: 680px) {
  :root {
    --title-size: 42px;
    --logo-size: 100px;
    --header-pad-y: 8px;
    --header-mb: 8px;
    --app-mt: 6px;
  }
  .title-line {
    white-space: normal;
    flex-direction: column;
    gap: 6px;
  }
  .site-byline {
    transform: none;
  }
}

/* -------------------------------------------------------------------------
   OPEN SHEET (2 halves) — UNCHANGED (printable cards)
   ------------------------------------------------------------------------- */
.sheet.card-sheet {
  position: relative;
  width: var(--SHEET_W);
  height: var(--SHEET_H);
  margin: 16px auto;
  background: #fff;
  color: #111;
  border: 1px solid #ddd;
  border-radius: 3mm;
  display: grid;
  grid-template-columns: 1fr 1fr;
  overflow: hidden;
}
@supports (overflow: clip) {
  .sheet.card-sheet {
    overflow: clip;
  }
}
.sheet .half {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}
.sheet .pad {
  width: calc(100% - (var(--pad) * 2));
  height: calc(100% - (var(--pad) * 2));
  padding: var(--pad);
  display: flex;
  flex-direction: column;
  gap: 2mm;
  align-items: center;
  justify-content: center;
}
.sheet .pad > * {
  max-width: 100%;
}

/* Fold line */
.fold-line {
  position: absolute;
  left: calc(50% - 0.25mm);
  top: 0;
  width: 0.5mm;
  height: 100%;
  background: repeating-linear-gradient(
    to bottom,
    #aaa,
    #aaa 2mm,
    transparent 2mm,
    transparent 4mm
  );
  opacity: 0.7;
  pointer-events: none;
}

/* Cover (right) */
.pad-cover {
  justify-content: center;
}
.cover .logo {
  font-weight: 900;
  font-size: 10.5mm;
  letter-spacing: 0.5mm;
  line-height: 1;
  text-align: center;
  color: #111;
}
.cover .logo span {
  color: #2a6df4;
}

/* Back (left) */
.pad-back {
  justify-content: center;
  align-items: center;
  gap: 3mm;
  text-align: center;
}
.qr-public {
  display: block;
  width: var(--QR_PUBLIC);
  aspect-ratio: 1/1;
  height: auto !important;
  background: #fff;
  border: 1px solid #eee;
  border-radius: 2mm;
  image-rendering: crisp-edges;
  image-rendering: pixelated;
}
.addrBlock .addr {
  display: block;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 2.6mm;
  word-break: break-all;
}

/* Inside (seed) */
.label {
  font-size: 2.6mm;
  color: #555;
  text-transform: uppercase;
  letter-spacing: 0.3mm;
}
.label.danger {
  color: var(--danger);
  font-weight: 800;
}
.info {
  width: 100%;
}
.mono {
  display: block;
  white-space: normal;
  word-break: break-word;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 2.3mm;
  line-height: 1.25;
  background: #f7f7f7;
  padding: 1.2mm;
  border-radius: 2mm;
  border: 1px solid #eee;
}
.no-scroll {
  max-height: none !important;
  overflow: visible !important;
}
.pad-secret {
  justify-content: flex-start;
  align-items: stretch;
  gap: 2mm;
  padding-top: 2mm;
}
.qr-seed {
  display: block;
  width: var(--QR_SEED);
  aspect-ratio: 1/1;
  height: auto !important;
  border: 1px solid #eee;
  border-radius: 2mm;
  background: #fff;
  image-rendering: crisp-edges;
  image-rendering: pixelated;
}

/* -------------------------------------------------------------------------
   ENTROPY OVERLAY — UNCHANGED
   ------------------------------------------------------------------------- */
.entropy-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}
.entropy-card {
  width: 96vw;
  height: 86vh;
  max-height: 860px;
  background: #111418;
  color: #e7e7e7;
  border: 1px solid #27303a;
  border-radius: 14px;
  padding: 16px 18px;
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.45);
  display: grid;
  gap: 12px;
  grid-template-rows: auto auto 1fr auto auto auto;
}
.entropy-pad {
  position: relative;
  min-height: 52vh;
  border: 2px dashed #3a4350;
  border-radius: 12px;
  background: #0f1113;
  margin: 8px 0 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
  cursor: crosshair;
}
.entropy-canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}
.entropy-instr {
  position: relative;
  z-index: 2;
  color: #9fb1c4;
  font-size: 16px;
  pointer-events: none;
}

/* Progress bar */
.pm-prog {
  margin-top: 4px;
}
.pm-prog__track {
  position: relative;
  width: 100%;
  height: 22px;
  border-radius: 999px;
  overflow: hidden;
  background: #1d232a;
  border: 1px solid #2c3440;
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.04);
}
.pm-prog__fill {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 0%;
  background: linear-gradient(90deg, #2a6df4, #22d8a2);
  box-shadow: 0 0 12px rgba(48, 165, 255, 0.45);
  transition: width 120ms linear;
}

/* Footer */
.progress-meta {
  margin-top: 4px;
  display: flex;
  justify-content: space-between;
  color: #9aa1a6;
  font-size: 13px;
}
.entropy-actions {
  margin-top: 6px;
  display: flex;
  gap: 10px;
  justify-content: flex-end;
}

/* Height tweaks */
@media (max-height: 900px) {
  .entropy-card {
    height: 84vh;
  }
  .entropy-pad {
    min-height: 48vh;
  }
}
@media (max-height: 750px) {
  .entropy-card {
    height: 82vh;
  }
  .entropy-pad {
    min-height: 42vh;
  }
  .pm-prog__track {
    height: 18px;
  }
}

/* -------------------------------------------------------------------------
   PRINT (unchanged for A4 duplex short-edge flip)
   ------------------------------------------------------------------------- */
@media print {
  @page {
    size: A4;
    margin: 10mm;
  }
  html,
  body {
    background: #fff;
    color: #111;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
  .app .card,
  .app .muted,
  .noprint,
  .entropy-overlay {
    display: none !important;
  }

  .sheet.card-sheet {
    margin: 0 auto;
    width: var(--SHEET_W) !important;
    height: var(--SHEET_H) !important;
    page-break-inside: avoid;
    overflow: hidden;
  }
  .sheet.card-sheet + .sheet.card-sheet {
    page-break-before: always;
  }

  .pad-secret {
    padding-top: 1.5mm;
  }
  .cover .logo {
    font-size: 10mm;
  }
  .label,
  .addrBlock .addr,
  .mono {
    font-size: 2.3mm;
  }
  .qr-public {
    width: 38mm;
    aspect-ratio: 1/1;
    height: auto !important;
  }
  .qr-seed {
    width: min(40mm, var(--QR_SEED));
    aspect-ratio: 1/1;
    height: auto !important;
  }
}
/* HEADER lisible en scroll */
.site-header {
  position: sticky;
  top: 0;
  z-index: 100;
  width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  padding: var(--header-pad-y) var(--header-pad-x);
  padding-top: max(var(--header-pad-y), env(safe-area-inset-top));
  margin-bottom: var(--header-mb);

  /* >>> NEW: fond + blur pour empêcher le contenu de passer visuellement dessous */
  background: var(--bg);
  -webkit-backdrop-filter: saturate(140%) blur(8px);
  backdrop-filter: saturate(140%) blur(8px);

  /* séparation visuelle */
  border-bottom: 1px solid rgba(8, 48, 43, 0.12);
  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.06);

  /* évite des effets de stacking bizarres avec le blur */
  isolation: isolate;
}
